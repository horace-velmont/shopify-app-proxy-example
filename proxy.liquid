{% layout none %}
<script id="channel-io-widget">
window.channelConfig = {};
window.channelConfig.customer = {};
window.channelConfig.customer.email = '{{customer.email}}';
window.channelConfig.customer.name = '{{customer.name}}';
window.channelConfig.customer.phone = '{{customer.phone}}';
window.channelConfig.customer.id = '{{customer.id}}';
window.channelConfig.addresses = [];
{% for address in customer.addresses %}
  var addressObj = {};
  addressObj.street = '{{ address.street }}';
  window.channelConfig.addresses.push(addressObj);
{% endfor %}
window.channelConfig.cart = {
  total_price : {{cart.total_price}}
};
window.channelConfig.cart.items = [];
{% for item in cart.items %}
  var itemObj = {};
  itemObj.title = '{{ item.title }}';
  window.channelConfig.cart.items.push(itemObj);
{% endfor %}

window.channelConfig.orders = [];
{% for order in customer.orders %}
  var orderObj = {};
  orderObj.name = '{{ order.name }}';
  orderObj.total_price = '{{ order.total_price }}';
  orderObj.fulfillment_status_label = '{{ order.fulfillment_status_label }}';
  window.channelConfig.orders.push(orderObj);
{% endfor %}

window.channelConfig.customer.orders_count = '{{customer.orders_count}}';
window.channelConfig.customer.total_spent = '{{customer.total_spent}}';
window.channelConfig.address = {
  address1 : '{{address.address1}}',
  address2 : '{{address.address2}}',
  shipping_address : '{{address.shipping_address}}',
  billing_address : '{{address.billing_address}}',
  name : '{{address.name}}'
};
</script>
